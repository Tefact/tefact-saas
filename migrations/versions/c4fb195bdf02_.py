"""empty message

Revision ID: c4fb195bdf02
Revises: bdffb00f635b
Create Date: 2020-05-10 14:09:11.170848

"""
from alembic import op
import sqlalchemy as sa
from sqlalchemy.dialects import mysql

# revision identifiers, used by Alembic.
revision = 'c4fb195bdf02'
down_revision = 'bdffb00f635b'
branch_labels = None
depends_on = None


def upgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('data_source', schema=None) as batch_op:
        batch_op.alter_column('name',
               existing_type=mysql.TINYINT(display_width=4),
               type_=sa.VARCHAR(length=50),
               existing_nullable=True)
        batch_op.create_foreign_key(None, 'application', ['application_id'], ['id'], ondelete='CASCADE')

    with op.batch_alter_table('edu_essential', schema=None) as batch_op:
        batch_op.alter_column('class_hours',
               existing_type=mysql.FLOAT(),
               server_default='0',
               existing_nullable=True)

    with op.batch_alter_table('entity', schema=None) as batch_op:
        batch_op.alter_column('has_connect_org',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)

    with op.batch_alter_table('entity_field', schema=None) as batch_op:
        batch_op.alter_column('has_link',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)
        batch_op.alter_column('has_search',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)
        batch_op.alter_column('has_sort',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)
        batch_op.alter_column('is_primary',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)
        batch_op.alter_column('verify_only',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)
        batch_op.alter_column('verify_require',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)

    with op.batch_alter_table('page_section', schema=None) as batch_op:
        batch_op.alter_column('has_add_btn',
               existing_type=mysql.TINYINT(display_width=1),
               type_=sa.Boolean(),
               existing_nullable=True)

    # ### end Alembic commands ###


def downgrade():
    # ### commands auto generated by Alembic - please adjust! ###
    with op.batch_alter_table('page_section', schema=None) as batch_op:
        batch_op.alter_column('has_add_btn',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)

    with op.batch_alter_table('entity_field', schema=None) as batch_op:
        batch_op.alter_column('verify_require',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)
        batch_op.alter_column('verify_only',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)
        batch_op.alter_column('is_primary',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)
        batch_op.alter_column('has_sort',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)
        batch_op.alter_column('has_search',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)
        batch_op.alter_column('has_link',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)

    with op.batch_alter_table('entity', schema=None) as batch_op:
        batch_op.alter_column('has_connect_org',
               existing_type=sa.Boolean(),
               type_=mysql.TINYINT(display_width=1),
               existing_nullable=True)

    with op.batch_alter_table('edu_essential', schema=None) as batch_op:
        batch_op.alter_column('class_hours',
               existing_type=mysql.FLOAT(),
               server_default=sa.text("'0'"),
               existing_nullable=True)

    with op.batch_alter_table('data_source', schema=None) as batch_op:
        batch_op.drop_constraint(None, type_='foreignkey')
        batch_op.alter_column('name',
               existing_type=sa.VARCHAR(length=50),
               type_=mysql.TINYINT(display_width=4),
               existing_nullable=True)

    # ### end Alembic commands ###
